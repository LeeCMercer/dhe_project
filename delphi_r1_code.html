<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Delphi Round 1 - Interim Report [DUMMY]</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="delphi_r1_code_files/libs/clipboard/clipboard.min.js"></script>
<script src="delphi_r1_code_files/libs/quarto-html/quarto.js"></script>
<script src="delphi_r1_code_files/libs/quarto-html/popper.min.js"></script>
<script src="delphi_r1_code_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="delphi_r1_code_files/libs/quarto-html/anchor.min.js"></script>
<link href="delphi_r1_code_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="delphi_r1_code_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="delphi_r1_code_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="delphi_r1_code_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="delphi_r1_code_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Delphi Round 1 - Interim Report [DUMMY]</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="contents" class="level2">
<h2 class="anchored" data-anchor-id="contents">Contents</h2>
<p><a href="#descriptive-statistics">1. Descriptive statistics</a><br>
<a href="#non-response-bias-check">2. Non-response bias check</a><br>
<a href="#consensus-measurement">3. Consensus measurement</a><br>
<a href="#qualitative-analysis">4. Qualitative analysis</a><br>
<a href="#revisions-for-round-2">5. Revisions for Round 2</a><br>
<a href="#post-hoc-comparisons">6. <em>Post-hoc</em> comparisons</a></p>
</section>
<section id="descriptive-statistics" class="level2">
<h2 class="anchored" data-anchor-id="descriptive-statistics">1. Descriptive statistics</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Purpose</strong> To provide an overview of the expert panel’s demographics and responses across key domains of digital health enablement.</p>
</div>
</div>
<section id="variables" class="level3">
<h3 class="anchored" data-anchor-id="variables">Variables</h3>
<ul>
<li>Gender</li>
<li>Ethnicity</li>
<li>Occupation/sector</li>
<li>Years of experience</li>
<li>Digital health enablement domains (e.g., digital competencies, digital health literacy).</li>
</ul>
</section>
<section id="methods" class="level3">
<h3 class="anchored" data-anchor-id="methods">Methods</h3>
<ol type="1">
<li>Calculate <strong>frequencies</strong> and <strong>percentages</strong> for categorical variables (e.g., gender, occupation).</li>
<li>Compute <strong>mean</strong> and <strong>standard deviation</strong> for continuous variables (e.g., years of experience, item ratings).</li>
<li>Provide the <strong>distribution of scores</strong> across the different digital health enablement sub-domains to summarise initial participant responses.</li>
</ol>
</section>
<section id="demographic-report" class="level3">
<h3 class="anchored" data-anchor-id="demographic-report">1.1. Demographic report</h3>
<section id="gender" class="level4">
<h4 class="anchored" data-anchor-id="gender">1.1.1. Gender</h4>
<p>The gender distribution of participants was fairly balanced, with a slight majority identifying as <strong>female</strong>. Additionally, a small but significant portion of participants identified as <strong>non-binary</strong> or <strong>transgender</strong>, reflecting a diverse gender representation in the sample.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="delphi_r1_code_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="ethnicity" class="level4">
<h4 class="anchored" data-anchor-id="ethnicity">1.1.2. Ethnicity</h4>
<p>The ethnic breakdown of participants revealed a diverse cohort, with the majority identifying as <strong>White British</strong>, followed by smaller proportions from <strong>Black</strong>, <strong>Asian</strong>, and <strong>other</strong> ethnic backgrounds. Notably, participants from minority ethnic groups accounted for nearly <strong>a third</strong> of the total sample, highlighting the varied demographic representation in the study.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="delphi_r1_code_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="educational-attainment" class="level4">
<h4 class="anchored" data-anchor-id="educational-attainment">1.1.3. Educational attainment</h4>
<p>The educational attainment of participants showed a broad range, with the largest group holding an <strong>undergraduate degree</strong>, followed by those with <strong>postgraduate</strong> or <strong>professional</strong> qualifications. A notable proportion of participants had <strong>school-level</strong> or <strong>further education</strong> qualifications, while a smaller group reported having no formal qualifications.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="delphi_r1_code_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="employment-sector" class="level4">
<h4 class="anchored" data-anchor-id="employment-sector">1.1.4. Employment sector</h4>
<p>The employment sector breakdown revealed a diverse range of occupations, with the majority of participants working in the <strong>public sector</strong>, particularly in education and healthcare. Smaller proportions were employed in the <strong>private sector</strong>, <strong>non-profit organizations</strong>, and <strong>vocational industries</strong>, while a minority reported being <strong>self-employed</strong> or not currently in paid employment.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="delphi_r1_code_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
</section>
<section id="non-response-bias-check" class="level2">
<h2 class="anchored" data-anchor-id="non-response-bias-check">2. Non-response bias check</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Purpose</strong> To assess if there are significant differences between early and late respondents, thereby checking for non-response bias. If the <strong>Mann-Whitney U</strong> test does not show significant differences, non-response bias is likely minimal.</p>
</div>
</div>
<section id="procedure" class="level3">
<h3 class="anchored" data-anchor-id="procedure">Procedure</h3>
<p>Divide respondents into early responders and late responders based on submission time. Perform the Mann-Whitney U test to compare these groups across key item ratings or total scores.</p>
</section>
<section id="variables-1" class="level3">
<h3 class="anchored" data-anchor-id="variables-1">Variables</h3>
<p>Total or individual item scores from various domains (e.g., digital competencies, digital health literacy).</p>
</section>
</section>
<section id="consensus-measurement" class="level2">
<h2 class="anchored" data-anchor-id="consensus-measurement">3. Consensus measurement</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Purpose</strong> To assess the level of agreement among experts on the relevance of each item.</p>
</div>
</div>
<section id="methods-1" class="level3">
<h3 class="anchored" data-anchor-id="methods-1">Methods</h3>
<ul>
<li><strong>Descriptive statistics</strong>: Report median and interquartile range (IQR) for each item on the 0-9 scale.</li>
<li><strong>Define a consensus threshold</strong>: Items with a median rating ≥ 7 and IQR ≤ 2 are considered to have reached consensus.</li>
<li><strong>Qualitative comments</strong>: Participants’ suggestions will be analysed (details below) to inform potential item revisions.</li>
</ul>
</section>
<section id="mean-item-scores" class="level3">
<h3 class="anchored" data-anchor-id="mean-item-scores">3.1. Mean item scores</h3>
<section id="sub-construct-1-digital-skills" class="level4">
<h4 class="anchored" data-anchor-id="sub-construct-1-digital-skills">3.1.1. Sub-construct 1: Digital Skills</h4>
<p>The distribution of digital skills scores reveals critical insights into the <strong>varying levels of digital competency</strong> among participants. Notably, the higher scores in <strong>Items 01</strong> and <strong>05</strong> indicate strong proficiency in basic digital tasks, while lower scores in <strong>Items 10</strong> and <strong>12</strong> highlight areas where individuals struggle, suggesting a need for targeted training and support to bridge the digital divide.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="delphi_r1_code_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Figure 5</strong> Mean scores for items related to <strong>Digital Skills</strong>.</p>
</section>
<section id="sub-construct-2-digital-health-literacy" class="level4">
<h4 class="anchored" data-anchor-id="sub-construct-2-digital-health-literacy">3.1.2 Sub-construct 2: Digital Health Literacy</h4>
<p>The distribution of digital skills scores reveals critical insights into the <strong>varying levels of digital competency</strong> among participants. Notably, the higher scores in <strong>Items 01</strong> and <strong>05</strong> indicate strong proficiency in basic digital tasks, while lower scores in <strong>Items 10</strong> and <strong>12</strong> highlight areas where individuals struggle, suggesting a need for targeted training and support to bridge the digital divide.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="delphi_r1_code_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Figure 6</strong> Mean scores for items related to <strong>Digital Health Literacy</strong>.</p>
</section>
<section id="sub-construct-3-digital-self-efficacy" class="level4">
<h4 class="anchored" data-anchor-id="sub-construct-3-digital-self-efficacy">3.1.3. Sub construct 3: Digital Self-Efficacy</h4>
<p>The distribution of digital skills scores reveals critical insights into the <strong>varying levels of digital competency</strong> among participants. Notably, the higher scores in <strong>Items 01</strong> and <strong>05</strong> indicate strong proficiency in basic digital tasks, while lower scores in <strong>Items 10</strong> and <strong>12</strong> highlight areas where individuals struggle, suggesting a need for targeted training and support to bridge the digital divide.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="delphi_r1_code_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Figure 7</strong> Mean scores for items related to <strong>Digital Self-Efficacy</strong>.</p>
</section>
<section id="sub-construct-4-socio-digital-norms" class="level4">
<h4 class="anchored" data-anchor-id="sub-construct-4-socio-digital-norms">3.1.4. Sub construct 4: Socio-Digital Norms</h4>
<p>The distribution of digital skills scores reveals critical insights into the <strong>varying levels of digital competency</strong> among participants. Notably, the higher scores in <strong>Items 01</strong> and <strong>05</strong> indicate strong proficiency in basic digital tasks, while lower scores in <strong>Items 10</strong> and <strong>12</strong> highlight areas where individuals struggle, suggesting a need for targeted training and support to bridge the digital divide.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="delphi_r1_code_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Figure 8</strong> Mean scores for items related to <strong>Socio-Digital Norms</strong>.</p>
</section>
<section id="sub-construct-5-digital-outcome-expectancy" class="level4">
<h4 class="anchored" data-anchor-id="sub-construct-5-digital-outcome-expectancy">3.1.5. Sub construct 5: Digital Outcome Expectancy</h4>
<p>The distribution of digital skills scores reveals critical insights into the <strong>varying levels of digital competency</strong> among participants. Notably, the higher scores in <strong>Items 01</strong> and <strong>05</strong> indicate strong proficiency in basic digital tasks, while lower scores in <strong>Items 10</strong> and <strong>12</strong> highlight areas where individuals struggle, suggesting a need for targeted training and support to bridge the digital divide.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="delphi_r1_code_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Figure 9</strong> Mean scores for items related to <strong>Digital Outcome Expectancy</strong>.</p>
</section>
<section id="sub-construct-6-digital-trust" class="level4">
<h4 class="anchored" data-anchor-id="sub-construct-6-digital-trust">3.1.6. Sub construct 6: Digital Trust</h4>
<p>The distribution of digital skills scores reveals critical insights into the <strong>varying levels of digital competency</strong> among participants. Notably, the higher scores in <strong>Items 01</strong> and <strong>05</strong> indicate strong proficiency in basic digital tasks, while lower scores in <strong>Items 10</strong> and <strong>12</strong> highlight areas where individuals struggle, suggesting a need for targeted training and support to bridge the digital divide.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="delphi_r1_code_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Figure 10</strong> Mean scores for items related to <strong>Digital Trust</strong>.</p>
</section>
<section id="sub-construct-7-digital-behavioural-regulation" class="level4">
<h4 class="anchored" data-anchor-id="sub-construct-7-digital-behavioural-regulation">3.1.7. Sub construct 7: Digital Behavioural Regulation</h4>
<p>The distribution of digital skills scores reveals critical insights into the <strong>varying levels of digital competency</strong> among participants. Notably, the higher scores in <strong>Items 01</strong> and <strong>05</strong> indicate strong proficiency in basic digital tasks, while lower scores in <strong>Items 10</strong> and <strong>12</strong> highlight areas where individuals struggle, suggesting a need for targeted training and support to bridge the digital divide.</p>
<p><em>The reason <strong>I use</strong> health apps is…</em></p>
<div class="cell">
<div class="cell-output-display">
<p><img src="delphi_r1_code_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Figure 11</strong> Mean scores for items related to <strong>Digital Behavioural Regulation (autonomous)</strong>.</p>
<p><em>The reason <strong>I use</strong> health apps is…</em></p>
<div class="cell">
<div class="cell-output-display">
<p><img src="delphi_r1_code_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Figure 12</strong> Mean scores for items related to <strong>Digital Behavioural Regulation (controlled)</strong>.</p>
<p><em>The reason <strong>I do not</strong> use health apps is…</em></p>
<div class="cell">
<div class="cell-output-display">
<p><img src="delphi_r1_code_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Figure 13</strong> Mean scores for items related to <strong>Digital Behavioural Regulation (amotivation)</strong>.</p>
</section>
</section>
</section>
<section id="qualitative-analysis" class="level2">
<h2 class="anchored" data-anchor-id="qualitative-analysis">4. Qualitative analysis</h2>
<section id="content-analysis" class="level3">
<h3 class="anchored" data-anchor-id="content-analysis">4.1 Content analysis</h3>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Purpose</strong> To systematically analyse the free-text comments for themes, suggestions, and critiques related to the items.</p>
</div>
</div>
<section id="steps" class="level4">
<h4 class="anchored" data-anchor-id="steps">Steps</h4>
<ol type="1">
<li><strong>Data familiarisation</strong>: Read all comments for each domain (e.g., digital competencies, digital health literacy).</li>
<li><strong>Initial coding</strong>: Develop a coding framework based on recurring themes such as wording suggestions, missing constructs, or relevance concerns. Example: If several participants suggest revising “I can download and install apps,” this might be coded as “wording suggestions.”</li>
<li><strong>Thematic analysis</strong>: Group codes into broader themes such as clarity of items, real-world applicability, or overlapping constructs. Highlight common patterns and concerns to guide item revision.</li>
<li><strong>Frequency analysis</strong>: Count occurrences of each theme to identify key areas for revision (e.g., frequent comments about simplifying certain items).</li>
<li><strong>Interpretation</strong>: Use themes to revise items for Round 2, ensuring the tool reflects expert input and clarity in measurement.</li>
</ol>
</section>
</section>
<section id="syntax-analysis" class="level3">
<h3 class="anchored" data-anchor-id="syntax-analysis">4.2 Syntax analysis</h3>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Purpose</strong> To examine the structure and tone of the language used in participants’ feedback.</p>
</div>
</div>
<section id="steps-1" class="level4">
<h4 class="anchored" data-anchor-id="steps-1">Steps</h4>
<ul>
<li><strong>Identify patterns in language use</strong>: Look for frequent words or phrases like “unclear,” “confusing,” or “easy to understand,” indicating the perceived quality of items. Analyse positive/negative valence: Are participants offering more critique or positive reinforcement? <strong>Linguistic markers</strong>: Evaluate the use of modal verbs (e.g., “could,” “might”) or qualifiers (e.g., “somewhat,” “possibly”) to gauge participants’ confidence or uncertainty. Examine directive language (e.g., “this must change”) for strong suggestions.</li>
<li><strong>Complexity and conciseness</strong>: Assess whether participants provide brief or detailed feedback. Longer feedback may indicate higher engagement or complexity in understanding the item.</li>
<li><strong>Discourse structure</strong>: Look at the structure of feedback (e.g., critiques followed by solutions) to assess the depth of thought. Combining Content and Syntax Analysis: Synthesising findings: Use content analysis to identify recurring themes and syntax analysis to determine how confidently these themes are expressed. Prioritise changes in areas where both the content and language suggest strong or frequent concerns.</li>
</ul>
</section>
</section>
</section>
<section id="revisions-for-round-2" class="level2">
<h2 class="anchored" data-anchor-id="revisions-for-round-2">5. Revisions for Round 2</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Purpose</strong> To refine the measurement tool based on Round 1 analysis.</p>
</div>
</div>
<section id="methods-2" class="level4">
<h4 class="anchored" data-anchor-id="methods-2">Methods</h4>
<ul>
<li>Retain items that reached consensus.</li>
<li>Revise or remove items that did not reach consensus, based on both qualitative feedback and quantitative measures.</li>
<li>Integrate suggestions from the content analysis to revise item wording or add new items where necessary.</li>
</ul>
</section>
</section>
<section id="post-hoc-comparisons" class="level2">
<h2 class="anchored" data-anchor-id="post-hoc-comparisons">6. <em>Post-hoc</em> comparisons</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Purpose</strong> To explore subgroup differences (e.g., academics vs.&nbsp;public health professionals) to determine if different groups hold varying views on item relevance.</p>
</div>
</div>
<section id="methods-3" class="level4">
<h4 class="anchored" data-anchor-id="methods-3">Methods</h4>
<ul>
<li>Use the Mann-Whitney U test (for two groups) or Kruskal-Wallis test (for multiple groups) to compare scores across different professional roles or experience levels.</li>
</ul>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>